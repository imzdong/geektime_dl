# å­˜å‚¨ä¼˜åŒ–æŒ‡å—

## ğŸ¯ å­˜å‚¨ç»“æ„æ¦‚è§ˆ

### å®¿ä¸»æœºç›®å½•ç»“æ„
```
./
â”œâ”€â”€ output/           # æœ€ç»ˆè¾“å‡ºæ–‡ä»¶ï¼ˆæŒä¹…åŒ–ï¼‰
â”‚   â”œâ”€â”€ mobi/       # MOBIæ ¼å¼ç”µå­ä¹¦
â”‚   â”œâ”€â”€ epub/       # EPUBæ ¼å¼ç”µå­ä¹¦  
â”‚   â””â”€â”€ pdf/        # PDFæ ¼å¼ç”µå­ä¹¦
â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”œâ”€â”€ cache/           # ç¼“å­˜æ–‡ä»¶ï¼ˆæŒä¹…åŒ–ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼‰
â”œâ”€â”€ data/           # å¤‡ä»½æ•°æ®
â””â”€â”€ temp/           # ä¸´æ—¶æ–‡ä»¶ï¼ˆä»…åœ¨å®¹å™¨å†…ï¼Œä¸æŒä¹…åŒ–ï¼‰
```

### å®¹å™¨å†…ç›®å½•æ˜ å°„
```
/app/output â†’ ./output          # æœ€ç»ˆæ–‡ä»¶
/app/config â†’ ./config          # é…ç½®æ–‡ä»¶
/app/cache  â†’ ./cache           # ç¼“å­˜æ–‡ä»¶
/app/data   â†’ ./data            # å¤‡ä»½æ•°æ®
/app/temp    (ä»…å®¹å™¨å†…)         # ä¸´æ—¶æ–‡ä»¶
```

## ğŸ“ æŒ‰è¯¾ç¨‹åˆ†ç¦»å­˜å‚¨

### è‡ªåŠ¨åˆ†ç±»å­˜å‚¨
å½“ä¸‹è½½è¯¾ç¨‹æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
1. ä¸ºæ¯ä¸ªè¯¾ç¨‹åˆ›å»ºç‹¬ç«‹ç›®å½•
2. æŒ‰æ ¼å¼åˆ†ç±»å­˜å‚¨
3. æ¸…ç†ä¸´æ—¶æ–‡ä»¶

### ç¤ºä¾‹ç›®å½•ç»“æ„
```
output/
â”œâ”€â”€ mobi/
â”‚   â”œâ”€â”€ 48/              # è¯¾ç¨‹48çš„MOBIæ–‡ä»¶
â”‚   â”‚   â””â”€â”€ å·¦è€³å¬é£.mobi
â”‚   â”œâ”€â”€ 49/              # è¯¾ç¨‹49çš„MOBIæ–‡ä»¶
â”‚   â””â”€â”€ 1162/            # è¯¾ç¨‹1162çš„MOBIæ–‡ä»¶
â”œâ”€â”€ epub/
â”‚   â”œâ”€â”€ 48/              # è¯¾ç¨‹48çš„EPUBæ–‡ä»¶
â”‚   â””â”€â”€ 49/              # è¯¾ç¨‹49çš„EPUBæ–‡ä»¶
â””â”€â”€ pdf/
    â”œâ”€â”€ 48/              # è¯¾ç¨‹48çš„PDFæ–‡ä»¶
    â””â”€â”€ 49/              # è¯¾ç¨‹49çš„PDFæ–‡ä»¶
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ä½¿ç”¨ç®¡ç†è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# ä¸‹è½½MOBIæ ¼å¼åˆ°å¯¹åº”ç›®å½•
./docker-interactive.sh ebook 48 --format mobi --comments-count 50

# ä¸‹è½½EPUBæ ¼å¼åˆ°å¯¹åº”ç›®å½•  
./docker-interactive.sh ebook 48 --format epub --comments-count 50

# ä¸‹è½½PDFæ ¼å¼åˆ°å¯¹åº”ç›®å½•
./docker-interactive.sh ebook 48 --format pdf --comments-count 50
```

### 2. è¿›å…¥å®¹å™¨æ‰‹åŠ¨æ“ä½œ
```bash
./docker-interactive.sh enter

# åœ¨å®¹å™¨å†…ä½¿ç”¨
# åˆ›å»ºè¯¾ç¨‹ç›®å½•
mkdir -p /app/output/mobi/48
mkdir -p /app/output/epub/48

# æŒ‡å®šè¾“å‡ºç›®å½•ä¸‹è½½
geektime ebook 48 --format mobi --output-folder /app/output/mobi/48
geektime ebook 48 --format epub --output-folder /app/output/epub/48
```

## ğŸ”§ é…ç½®æ–‡ä»¶è®¾ç½®

### é»˜è®¤é…ç½®
é…ç½®æ–‡ä»¶ `./config/geektime.cfg` ä¸­çš„è®¾ç½®ï¼š
```ini
[default]
area = 86
auth_token = your_token_here
auth_type = token
comments_count = 50
output_folder = /app/output/mobi  # é»˜è®¤MOBIè¾“å‡ºç›®å½•
```

### å¤šæ ¼å¼è¾“å‡º
å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¦†ç›–ï¼š
```bash
# è¾“å‡ºä¸åŒæ ¼å¼
geektime ebook 48 --format epub --output-folder /app/output/epub/48
geektime ebook 48 --format pdf --output-folder /app/output/pdf/48
```

## ğŸ“Š ä¸´æ—¶æ–‡ä»¶ç®¡ç†

### ä¸´æ—¶æ–‡ä»¶ä½ç½®
- **å®¹å™¨å†…**: `/app/temp/`
- **ç”¨é€”**: ä¸‹è½½è¿‡ç¨‹ä¸­çš„ä¸´æ—¶æ•°æ®
- **ç‰¹ç‚¹**: ä¸æŒä¹…åŒ–ï¼Œå®¹å™¨é‡å¯åè‡ªåŠ¨æ¸…ç†

### ç¼“å­˜æ–‡ä»¶ä½ç½®  
- **ä½ç½®**: `./cache` (å®¿ä¸»æœº) â†’ `/app/cache` (å®¹å™¨)
- **ç”¨é€”**: æ”¯æŒæ–­ç‚¹ç»­ä¼ 
- **ç‰¹ç‚¹**: æŒä¹…åŒ–ï¼Œæé«˜ä¸‹è½½æ•ˆç‡

### æ‰‹åŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶
```bash
# æ¸…ç†å®¹å™¨å†…ä¸´æ—¶æ–‡ä»¶
docker exec geektime_dl rm -rf /app/temp/*

# æ¸…ç†ç¼“å­˜æ–‡ä»¶ï¼ˆè°¨æ…æ“ä½œï¼‰
docker exec geektime_dl rm -rf /app/cache/*
```

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. æ‰¹é‡ä¸‹è½½
```bash
# ä¸‹è½½å¤šä¸ªè¯¾ç¨‹çš„ä¸åŒæ ¼å¼
for course in 48 49 50; do
    ./docker-interactive.sh ebook $course --format mobi --comments-count 50
    ./docker-interactive.sh ebook $course --format epub --comments-count 50
done
```

### 2. æŸ¥çœ‹ä¸‹è½½è¿›åº¦
```bash
# æŸ¥çœ‹è¾“å‡ºç›®å½•
watch -n 5 'ls -la output/mobi/*/'

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs -f geektime_dl
```

### 3. å­˜å‚¨ç©ºé—´ç®¡ç†
```bash
# æŸ¥çœ‹å„ç›®å½•å¤§å°
du -sh output/* cache/ data/

# æ¸…ç†æ—§è¯¾ç¨‹ï¼ˆæŒ‰éœ€ï¼‰
rm -rf output/mobi/48
```

## ğŸ¯ æ¨èå·¥ä½œæµç¨‹

### æ—¥å¸¸ä¸‹è½½
```bash
# 1. å¯åŠ¨å®¹å™¨
./docker-interactive.sh start

# 2. ä¸‹è½½è¯¾ç¨‹ï¼ˆè‡ªåŠ¨åˆ†ç±»å­˜å‚¨ï¼‰
./docker-interactive.sh ebook 48 --format mobi --comments-count 50

# 3. æ£€æŸ¥ç»“æœ
ls -la output/mobi/48/
```

### é«˜çº§ä½¿ç”¨
```bash
# 1. è¿›å…¥å®¹å™¨
./docker-interactive.sh enter

# 2. ä½¿ç”¨åˆ«åå¿«é€Ÿæ“ä½œ
gq                                    # æŸ¥è¯¢è¯¾ç¨‹
ge 48 --comments-count 50               # ä¸‹è½½è¯¾ç¨‹48
gt ebook 1162 --format epub            # ä¸‹è½½è¯¾ç¨‹1162çš„EPUBç‰ˆ

# 3. é€€å‡ºå®¹å™¨
exit
```

## ğŸ“‹ å­˜å‚¨ä¼˜åŒ–ä¼˜åŠ¿

1. **ğŸ—‚ï¸ åˆ†ç±»æ¸…æ™°**: æŒ‰è¯¾ç¨‹IDå’Œæ ¼å¼åˆ†ç±»ï¼Œä¾¿äºç®¡ç†
2. **ğŸ”„ æ–­ç‚¹ç»­ä¼ **: ç¼“å­˜ç›®å½•æ”¯æŒæš‚åœåç»§ç»­ä¸‹è½½
3. **ğŸ§¹ è‡ªåŠ¨æ¸…ç†**: ä¸´æ—¶æ–‡ä»¶ä¸å ç”¨å®¿ä¸»æœºç©ºé—´
4. **ğŸ“ çµæ´»æ‰©å±•**: å¯æ ¹æ®éœ€è¦æ·»åŠ æ–°æ ¼å¼åˆ†ç±»
5. **âš¡ é«˜æ•ˆæŸ¥æ‰¾**: å¿«é€Ÿå®šä½ç‰¹å®šè¯¾ç¨‹çš„ç‰¹å®šæ ¼å¼æ–‡ä»¶

ç°åœ¨ä½ çš„ä¸‹è½½æ–‡ä»¶ä¼šè‡ªåŠ¨æŒ‰è¯¾ç¨‹å’Œæ ¼å¼åˆ†ç±»å­˜å‚¨ï¼Œä¸´æ—¶æ–‡ä»¶ä¸ä¼šæ±¡æŸ“å®¿ä¸»æœºç›®å½•ï¼